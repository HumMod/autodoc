<!DOCTYPE html>

<!--
  Created : 2012-01-19
  Author : Tom Coleman
  Copyright : 2012-2013
  By : University of Missippi Medical Center
-->

<html>
<head>
<title> Log </title>
<link rel='stylesheet' type='text/css' href='Style.CSS'>
</head>

<body>

<span class='Banner'> HumMod Repository Log </span>

<p>
2013-05-09. ScriptedController bumped to v2.0.14.

<p>
Thanks to Drew for this ticket. I wrote 2 scripts that
verify that ScriptedController freezes on dumpsegment
and dumpsolution when the roster is rosterall.

<p>
My bad. ScriptedController was actually running OK
with rosterall. It was just taking an infinite amount
of time. The dumped file is quite large (8000 vars *
20 bytes/value * 10 values/var = 1 - 2 MB). The files
image is constructed internally in a string.

<p>
.Net framework has two ways to represent a string :
as a string object and as a StringBuilder object.
String objects are immutable and must be continually
created and distroyed when building a large string
from small fragments. StringBuilder objects are like
huge arrays where fragments can be dumped in at light
speed. SciptedController can now write a segment or
solution using rosterall at a speed that seems
instantaneous. Check your LOG file.

<p>
Edits are in StorageDumper.CS.

<p>
2013-05-07. Scripter bumped to v2.0.0 in preparation
for a major rewrite. Scripter is the utility that
converts the XML version of a model to its JavaScript
equivalent. 2013-05-08 Revision done but not pushed.

<p>
2013-04-30. HumMod bumped to v2.0.66. Corrected a math
mis-statement that may have caused implicit algebraic
convergence problems under severe conditions.

<p>
XML in LeftHeartPumping-Systole.TMP-Passive and in
RightHeartPumping ... Not visible.

<p>
2013-04-11. ScriptedController overhaul. Version
bumped to 2.0.13. Code in AboutDialogBox.CS.

<p>
NB. Reset is no longer a valid element -- it is no
longer required. All scripts using this element will
fail to parse.

<p>
Changed display in IO_Load_ICs to show that these
values are now current values. These values go across
to the model solver as current values.

<p>
IPC_Out_Sending_ICs keeps its class name, but sends
a sending_current_values message.

<p>
IPC_Out_Reset has been removed.

<p>
S_Reset has been removed and S_Script no longer refers
to this class.

<p>
IPC_In_VarRoster no longer refers to IPC_Out_Reset.

<p>
Script_Reset and Work_Reset classes have been removed.

<p>
2013-04-11. InteractiveController overhaul. Version
bumped to 1.1.15. Code in AboutDialogBox.CS.

<p>
InteractiveController no longer calls for a reset
when loading. Code edited in StartupManager.CS.
Classes ResetManager and IPC_Out_Reset are no longer
needed.

<p>
A tab in the Advanced tabbed dialog implemented a
model reset. Removed.

<p>
Changed the labels in the File menu to Save Current
Values and Load Current Values to more accurately
reflect what is really going on.

<p>
When current values are loaded from a file (IO_Load_ICs.CS,
class name has not been changed) the values are sent
to the model solver as current values and the model
solver is not restarted. Classes Sending_ICs_Manager
and IPC_Out_Sending_ICs have been removed.

<p>
2013-04-11. ModelSolver overhaul. Version bumped to
1.0.16.

<p>
In Var_Base.CS, the DefaultIC property of the Var_Base
object has been removed. AddVal now adds a value to the
IC property.

<p>
In Var_Base_Messages.CS, the method ResetModel has been
removed. The concept of reset is no longer supported.
The parser loads IC values and these values are preserved.
The RequestData() method no longer returns a DefaultIC
image.

<p>
In SolutionManager.CS, the method Reset() has been
removed.

<p>
The class IPC_In_Reset has been removed. This is the class
that processed the reset message. The class S_Reset has
been removed. This class defined the reset message schema.
The S_SolverIn class no longer tries to build the reset
schema into the overall messaging schema.

<p>
There were previously two messages that sent across values :
sending_ics and sending_current_values. Sending_ics has
been removed as values now can only come across as current.
S_Sending_ICs.CS and IPC_In_Sending_ICs.CS have been deleted.
The S_SolverIn class no longer looks for the IC's schema.

<p>
2013-04-11. Modeling arterial and venous O2 is difficult
because O2 flows are large and O2 masses are small. This
is stiff. I was using stable delays on both the arterial
and venous sides. But this did not represent mass balance
very well during O2 transients. Now using stable integrals
on the arterial and venous sides. Very stable and mass
balance is represented correctly.

<p>
XML is at Structure\O2\O2Artys and O2Veins. Visible at
Respiration | O2 | Blood Arties and Veins.

<p>
2013-04-10. HumMod bumped to v2.0.65.

<p>
2013-04-10. Still HumMod v2.0.64. Autopsy executes some
code and one of the variables (OsmBody ...) was incorrectly
named. This was visible only when HumMod died. Fixed.

<p>
2013-04-04. Move these repo's to Archives : TheValidator,
TheBatchValidator, validation. Deleted these repo's in
GitHub.

<p>
HumMod bumped to 2.0.64. Doing some minor edits. Added a
clock icon to the chart (visible under Diagnosis | Chart). 

<p>
2013-04-03. Scripter bumped to v1.0.1. Scripter now cancels
automatic parse when launched with the control key pressed.
Removed all items from the File menu except exit. Work flow
is defined in the Options tabbed dialog box.

<p>
2013-03-28. HumMod bumped to v2.0.63. Added content to
Lactate-Transport.REF (in Structure\Lactate) indicating that
lactate movement in and out of organs should be both flow
and diffusion limited. Also backward Euler integration for
organ lactate mass may be a good choice (replacing the
current mess -- as identified by Drew and Victoria).

<p>
All 12 organs get a lactate redo including backward Euler.
Panels are at Organs | OrganName | Lactate. These panels
get 2 new graphs : lactate made and lactate used. The
technical box is gone.

<p>
2013-03-27. Implementing a message pair to request the
roster of parameters from the ModelSolver and to get
a roster message in response.

<p>
Documentation edits at ScriptedController\Docs\Schema\Message\

<ul>
<li> SolverIn\Overview-SolverIn
<li> SolverIn\SolverIn-RequestParmRoster
<li> SolverOut\Overview-SolverOut
<li> SolverOut\SolverOut-ParmRoster
</ul>

<p>
ModelSolver bumped to version 1.0.15. ModelSolver source
code edits.

<ul>
<li> AboutDialogBox.CS
<li> S_SolverIn.CS
<li> S_RequestParmRoster.CS
<li> IPC_In_RequestParmRoster.CS
<li> Var_Base_Messages.CS
<li> IPC_Out_ParmRoster.CS
</ul>

<p>
Documentation edits at ScriptedController\Docs\Schema\Script\

<ul>
<li> Overview-Script
<li> Element-RosterParms
</ul>

<p>
ScriptedController bumped to version 2.0.12. ScriptedController
source code edits.

<ul>
<li> AboutDialogBox.CS
<li> S_Script.CS
<li> S_RosterParms.CS
<li> Script_RosterParms.CS
<li> Work_RosterParms.CS
<li> IPC_Out_RequestParmRoster.CS
<li> S_ParmRoster.CS
<li> IPC_In_ParmRoster.CS
</ul>

<p>
Sample files at ScriptedController\Docs\Scripts\

<ul>
<li> RosterParms.Script
<li> RosterParms.LOG
<li> RosterParms.DUMP
</ul>

<p>
2013-03-25. HumMod held at v2.0.62. Fixed 2 instances in
Display\Right, LeftHeartPumping\Systole\TechnicalActive
where in inc element in a showcurve was empty. Modular
Controller wouldn't parse a space to a number.

<p>
Note to Robert. EXE has a tab in Options called Reset |
Restart. It has two options : 1) reset the model and solver
to their original values and restart the solution and 2)
move current values to initial conditions and restart
solution.

<p>
In ScriptedController's Advanced tabbed dialog, the Reset
panel does 1) above. But 2) above now has its own panel
tabbed New IC's. It appears to work just fine.

<p>
The current version of InteractiveController is 1.1.14 and
it appears to Save and Load initial conditions without
error. What it doesn't appear to do is refresh a panel's
graphs under certain conditions. The work around is to
tab to a different panel and then tab back to force a
refresh.

<p>
2013-03-23. There is a working description (with example)
of ScriptedController's validation elements at
Docs\Schema\Script\Model Validation Notes.DOCX.

<p>
For now, 5 elements have be added (this is a simple
implementation).

<ul>
<li> &lt;stats_log_global/&gt;
<li> &lt;stats_log_local/&gt;
<li> &lt;stats_reset_global/&gt;
<li> &lt;stats_reset_local/&gt;
<li> &lt;stats_test&gt; ... &lt;/stats_test&gt;
</ul>

<p>
The new C# classes are

<ul>
<li> S_Stats_Log_Global.CS
<li> S_Stats_Log_Local.CS
<li> S_Stats_Reset_Global.CS
<li> S_Stats_Reset_Local.CS
<li> S_Stats_Test.CS
<li> Script_Stats_Log_Global.CS
<li> Script_Stats_Log_Local.CS
<li> Script_Stats_Reset_Global.CS
<li> Script_Stats_Reset_Local.CS
<li> Script_Stats_Test.CS
<li> Work_Stats_Log_Global.CS
<li> Work_Stats_Log_Local.CS
<li> Work_Stats_Reset_Global.CS
<li> Work_Stats_Reset_Local.CS
<li> Work_Stats_Test.CS
<li> Stats_Aggregate_Global.CS
<li> Stats_Aggregate_Local.CS
<li> Stats_Test.CS
</ul>

<p>
2013-03-22. ScriptedController bumped to v2.0.11. Will be
adding validation functionality to this module.

<p>
2013-03-22. HumMod bumped to v2.0.62. Added some documentation
in

<ul>
<li> AminoAcid
<li> Nephron\Ketoacids
<li> Posture
</ul>

<p>
2013-03-20. Thanks to John Clemmer for putting together all of
the physiology that connects hemorrhage to gluconeogenesis.
And also digging out a ton of important papers in the biomedical
literature.

<p>
Created (hypothalamic) nuclei to help control the secretion of
ADH and CRF. Outflow from the nuclei are a function of
barorecptor activity, low pressure receptor stimulation and
glucose receptor stimulation. ADH secretion retains its strong
osmotic influence. XML is at Nerves\Nucleus-ADH and Nucleus-CRF.
Visible at Nervous System | Autonomics | CNS.

<p>
Rebuilt CRF. [CRF] in portal blood is a function of NA at its
nucleus, stress and [cortisol] (inhibitory). XML at Structure\
CorticotropinReleasingFactor. Visible at Hormones | Corticotropin
Releasing Factor.

<p>
Rebuilt ACTH to include effect of ADH on ACTH secretion and the
newly revised [CRF]. XML at Structure\ACTH. All new panel at
Hormones | ACTH.

<p>
Removed the structure for pituitary nerve. The concept was not
a good one. ADH secretion now gets its neural input from
Nucleus-ADH.NA.

<p>
Reorganized the ADH | Formation panel's secretion box to better
show causality. Visible at Hormones | ADH | Formation.

<p>
Last log for v2.0.61. It goes 1 week of steady state in 1830
steps.

<p>
2013-03-19. HumMod bumped to v2.0.61. Added nG/dL to aldo
panel along with some additional stuff in the aldo information
box.

<p>
Reorganized the presentation of drugs. Dosing and kinetics for
each drug are now presented together under Interventions.
Kinetics is no longer displayed under Miscellaneous.

<p>
Implemented (hypothalamic) glucose receptors. XML is at
Structure\Nerves\GlucoseReceptors. Visible at Nervous System
| Autonomics | Afferents. No CNS integration yet.

<p>
2013-03-19. Last log for v2.0.60. It goes 1 week of steady
state in 1700 steps.

<p>
2013-03-18. Added panels under Kidney ... Nephrons to provide
the details of the determinants of fractional Na+ reabsorption
and K+ secretion. Panels are visible at

<ul>
<li> Proximal Tubule
<li> Loop Of Henle
<li> Distal Tubule
<li> Collecting Duct
</ul>

<p>
Added a groupbox to show the dynamics of the collecting duct
H2O channels. Visible at Organs | KKidney ... Nephrons |
Collecting Duct | Water.

<p>
Cleaned up the cortisol panel, giving it boxes for secretion
and disposal. And moving mass into the pool box. Visible at
Hormones | Cortisol.

<p>
2013-03-17. Implemented the MineralocorticoidReceptor. XML is at
Structure\MineralocorticoidReceptor. Visible at Organs |
Kidney ... Nephrons | Aldosterone.

<p>
2013-03-16. Installed spironolactone up to receptor dynamics.
XML is at Drugs\Spironolactone\ several structures. Panels are
visible at Interventions | Drugs | Spironolactone and Miscellaneous |
Pharmacokinetics | Spironolactone.

<p>
2013-03-15. HumMod bumped to v2.0.60. Added a calculation to
diet goal to electrically balance the electrolyte intake. XML
in Diet\DietGoalElectrolytes. Visible at Lifestyle | Diet |
Goal. Right now, the added HCO3- and NH4+ don't actually make
it to the gut.

<p>
2013-03-13. HumMod bumped to v2.0.59 after correcting a small
problem with stiffness. V2.0.58 did standing just fine but was
too stiff for long-term simulations. V2.0.59 should do better.

<p>
2013-03-13. Had some data from Musgrove using LBNP and a waist
down plethysmograph that indicated that about 800 mL of blood
move to the lower torso on standing. OK, so this informs HumMod's
sequestered blood. But upon HumMod standing, stroke volume is
basically unchanged while in reality stroke volume falls dramatically.
What was not in HumMod was the fact that upon standing all of the
blood below the heart gets a hydrostatic gradient that impedes
venous return. This is equivalent to a sequestration of 1400 mL
(1200 in veins, 200 in arteries, for now). So 2.0.58 stands rather
nicely. I'll try to make this more anatomically correct later.

<p>
XML at SequesteredBlood\BVSeqVein.

<p>
2013-03-10. Sympathetic integration now has CNS centers (sort of
nuclei) for
 
<ul>
<li> General
<li> Adrenal
<li> Cardiac
<li> Renal
<li> Hepatic
<li> Mesenteric
</ul>

<p>
Just like the ganglia. XML is in Nerves. Visible at Nervous System
| Autonomics | CNS. The renal and mesenteric tracts now produce
a brisk vasoconstriction when the low pressure receptors are
unloaded upon standing. This conforms to supporting human data from
standing and LBNP.

<p>
2013-03-09. Moved coronary sinus, hepatic artery, hepatic vein,
portal vein and venae cava to structure top level. Part of the
motivation for this move is that hepatic artery is about to get
alpha vasoconstrictor function. Moved splanchnic circulation and
venae cava panels from Circulation | Blood Vessels to Circulation. 

<p>
Added alpha receptors to hepatic artery. XML is at Hepatic Artery,
HepaticArtery-Flow and HepaticArtery-AlphaReceptors. Panel at
Circulation | Splanchnic Circulation | Hepatic Artery.

<p>
2013-03-07. Blood sample now refers to OsmBody.CellWall(mOsm/L)
which is the correct reference.

<p>
Connected ganglia to the target organs : cardiac to right and
left heart, hepatic to liver, GI to GI tract, adrenal to adrenal
nerve.

<p>
Expanded the content in the alpha and beta pool panels. Visible
at Nervous System | Catechols.

<p>
2013-03-06. HumMod bumped to v2.0.58. Expanded ANP display from
a single panel to pool and secretion panels. Visible at Hormones
| ANP.

<p>
Putting in the infrastructure for a more detailed sympathetic
nervous system. First in are the sympathetic ganglia.

<ul>
<li> General
<li> Adrenal
<li> Cardiac
<li> Renal
<li> Hepatic
<li> Mesenteric
</ul>

<p>
XML is at Nerves\Ganglia-GangliaName. Visible at Nervous System
| Autonomic Nerves | Efferents.

<p>
2013-03-06. Sized all of the components that are needed to size
osmolality properly. Then sized it. Cell wall osmolality now
starts ~284 with osmoreceptor osmolality at ~ 271. The cell wall
osmolality partitions body H2O into ECFV and ICFV, so its good to
get off to a good start. XML is at Sizing\Sizing-Osmoles. Panel
at Sizing | Osmoles. Sizing components are visible in other sizing
panels.

<p>
Fixed a pitiful error in the way that osmoreceptor osmolality is
caleculated. XML at Osmoles\OsmBody.

<p>
Calibrated the ADH secretion response to osmoreceptor osmolality.

<p>
Calibrated the ANP secretion response to RA-TMP and LA-TMP.

<p>
The goal here is to have a model that can solve for 1 week in 2000
steps or less. 2.0.57 goes 1 week in 1600 steps, so good.

<p>
2013-03-02. HumMod bumped to v2.0.57. Added a Pressures structure
that is initialized by Sizing-Pressures. It will be used later in
controlling ANP secretion and maybe some other stuff.

<p>
Cleaned up HumMod's root by removing stuff (Stochastic and Scholar)
that is not going anywhere.

<p>
Continued to revise and improve HumMod's sizing. XML is at
<ul>
<li> Sizing-TissueH2O.DES
<li> Sizing-ExternalH2O.DES
<li> Sizing-BodyH2O.DES
<li> Sizing-ECFV.DES
<li> Sizing-ICFV.DES
<li> Sizing-InterstitialWater.DES
<li> Sizing-CellH2O.DES
</ul>

<p>
Panels are at Sizing | H2O.

<p>
2013-03-01. Bumped HumMod to v2.0.56. Added a structure named
Density to host the various densities that HumMod uses. These
values will be used both in sizing and solving. 

<p>
2013-02-28. I didn't appreciate the importance of the lymphatic
system concentrating protein at the lymph nodes. The result was
a slow redistribution of circulatory protein the pulled plasma
volume, cardiac output and arterial pressure down. Won't go into
the physiology here. But, added some additional panels (supplementing
Miscellaneous | Torso) at Circulation | Interstitium.

<p>
Added lymph protein concentrating. Added a new parameter set for
capillary water permeability and capillary protein diffusing
coefficient.

<p>
2013-02-27. HumMod bumped to v2.0.55. Moved some notes into
Structure\TissueH2O related to lymph flow.

<p>
2013-02-26.Added sizing to heart pumping. This sizes the
diastolic and systolic pressure-volume curves. The XML is at

<ul>
<li> Sizing-HeartPumping-Right-Diastole
<li> Sizing-HeartPumping-Right-Systole
<li> Sizing-HeartPumping-Right-ContractileProtein
<li> Sizing-HeartPumping-Left-Diastole
<li> Sizing-HeartPumping-Left-Systole
<li> Sizing-HeartPumping-Left-ContractileProtein
</ul> 

<p>
Added sizing for the low-pressures receptors. The adapted
pressure needs an accurate start.

<p>
Tweaked blood volume sequestered in veins to get an initial
volume of 150 mL at a lower torso venous pressure of 14 mmHg.

<p>
Systemic veins outflow was not including coronary sinus
blood flow. Fixed. My bad.

<p>
2013-02-25. Bump HumMod to v2.0.54. Added some pressures to
Sizing-Pressures. Visible at Sizing | Pressures.

<p>
2013-02-25. Installed basic cardiac hypertrophy physiology.
Heart contractile protein mass is a function of end-systolic
ventricular wall stress with a delay in between. XML is at

<ul>
<li> RightHeartWallStress-Systole
<li> RightHeartPumping-ContractileProtein
<li> LeftHeartWallStress-Systole
<li> LeftHeartPumping-ContractileProtein
</ul>

<p>
Panels at

<ul>
<li> Circulation | Right Heart Wall Stress | Systole
<li> Circulation | Right Heart Pumping | Contractile Protein
<li> Circulation | Left Heart Wall Stress | Systole
<li> Circulation | Left Heart Pumping | Contractile Protein
</ul>

<p>
2013-02-24. HumMod bumped to v2.0.53.

<p>
Added the math to calculate left and right ventricle wall
stress at end-diastole and end-systole. Two top level structures
have been created : LeftVentricleWallStress and RightVentricleWallStress
with Mass, Diastole and Systole child structures. Visible at
Circulation | Left Heart Wall Stress and Right Heart Wall Stress.

<p>
Added top-level structure PressureTools since we are converting
between mmHg and kDynes/cM^2.

<p>
Removed structures LeftHeartPumping-Work and RightHeartPumping-Work
and panels under Circulation | LeftHeartPumping and RightHeartPumping.
That is not how the heart works (no pun).

<p>
2013-02-22. Connecting work to contractile protein in the left
heart was done very poorly and always led to a loss of muscle
(heart failure and hypotension) -- which was evident at a week
and really evident at a month. This functionality is now shut
down while much better physiology is being prepared. Patch is
visible at Structure\Left and RightHeartPumping\Left and
RightHeartPumping-ContractileProtein.

<p>
2013-02-21. Fixed an invalid empty integer element in Bladder |
Proteinuria. I screwed this up when editing the bladder panel
recently.

<p>
Sized the pericardium and did some work on its values and pressure
-volume relationship. It's a bit less stiff at the normal heart
volume. Added Pericardium Notes.TXT to Structure\Pericardium.

<p>
2013-02-20.The kidney O2 shunt has two calculations that use
kidney blood flow in their denominator. So they throw a divide by
zero when kidney blood flow is zero (as in v-fib). I trapped
these for zero flow, where shunt is basically undefined. Thanks
to Robert Hester for this. The XML is in Structure\Kidney\
Kidney-TubuleO2.DES.

<p>
Added a pressures reference to sizing. These pressure do not
actually size any pressures, but instead are used to size
vascular compliance and vascular conductance during sizing
operations. XML in Sizing-Pressure. Visible at Sizing | Pressures.

<p>
Adding sizing for the blood vessels (vascular compartments) using
blood volume, these pressures, cardiac output and a varient of
relevant fractions. XML is in Structures\Sizing. The parent structure
is Sizing-BloodVessels followed by vascular structures prefixed
with Sizing-.

<ul>
<li> Arteries
<li> SystemicArteries
<li> Veins
<li> PeripheralVeins
<li> SplanchnicVeins
<li> RightAtrium
<li> Lungs
<li> PulmonaryArtery
<li> PulmonaryCapillaries
<li> PulmonaryVeins
<li> LeftAtrium
</ul>

<p>
Visible at Sizing | Blood Vessels.

<p>
2013-02-19. HumMod version bumped to 2.0.52. Edited display to
make Circulation | Blood Vessels | Arteries | Systemic Arteries
visible. This panel just wasn't connected.

<p>
2013-02-18. HumMod version bumped to 2.0.51. Adding mass
balance for 20 amino acids -- 10 essential and 10 non-essential.
First compartments are extracellular, in Structure\AminoAcid.
Structure names have AA- prefix. Panel is at Metabolism |
Amino Acids | ECFV.

<p>
Under development but not completed is scaling the vascular
compartments at startup so that the model is context sensitive
but not parameter sensitive. Coming next.

<p>
2013-02-17. HumMod version bumped to 2.0.50. Finishing up
renal O2 shunt and EPO. Added some reference files in
Structure to EPO and Kidney-TubuleO2.

<p>
EPO now gets 3 panels : pool, secretion and disposal. Added
detail includes pG/mL, an [EPO] clamp, parametric volume
of distribution and parametric 1/2 life.

<p>
RBC's also get 3 panels under Body Fluids | Blood | Red
Cells : pool, secretion, disposal. Delay of [EPO] effect
on red cell formation and red cell lifespan are now
adjustable parameters.

<p>
2013-02-16. HumMod version bumped to 2.0.49. It now seems
that there are lots of cells in the renal cortex that can
secrete EPO, with the juxtamedullary region the first to
act. So what was called proximal tubule pO2 is now extended
to tubule O2. Editing is visible at Organs | Kidney | Tubule
O2. XML editing is visible at Structure\Kidney\TubuleO2.

<p>
Added preglomerular O2 shunting to the kidney. This looks
like a very important physiological part of the control of
EPO secretion.

<p>
HumMod now goes for 1 month on 7672 steps and 2765 retries.
BP drifts down to 104/65. Plasma volume expands. But EPO
seems well controlled and RBC volume stays flat at around
2380 mL. More to follow ...

<p>
2013-02-13. Expanded autopsy report to include both
examination and chemistry. 

<p>
In posture control and energy and status, a constant was
named both TILTED and TILTING, eliciting an unknown variable
error when HumMod dies. Fixed to TILTING for all references.

<p>
2013-02-12. HumMod version bumped to 2.0.48. Put lots of
note files on amino acids in Structure\AminoAcid\Notes.
These are references for future expansion of amino acid
physiology.

<p>
2013-02-10. HumMod version bumped to 2.0.47. Time for
some cleaning up. Deleted heat panels under Miscellaneous.
Heat now has its own top level pop-down menu. Had to update
some paths that were pointing back to Miscellaneous.

<p>
Twelve major organs defined FAFraction (KAFraction in the
brain) in a block named Failed that is executed when the
organ has failed. But FAFraction was no longer declared, so
a left-side variable is not declared error would occur when
this block was executed. Deleted 12 defines that are no
longer needed.

<p>
Renamed the curve FAFraction to FAUsedFraction in structures
and panels. This is just a matter of style.

<p>
Found and deleted orphan GITract panels embedded in the Fat
panels folder.

<p>
Note to Robert. You can advance the solution, change the
context (the entire model is rescaled) and advance the
solution some more. But female scaling is not yet complete
-- some parameters are highly out of bounds -- so the
solution struggles along rather slowly. Typical values are
600 steps and 60 retries for 1 male day and 9000 steps and
1200 retries for 1 female day.

<p>
2013-02-09. Added dosing and pharmacokinetics for
acetazolamide. Structures are at Structures\Drugs\
Acetazolamide. Panels are visible at Interventions |
Drugs | Acetazolamide (dosing) and Miscellaneous |
Pharmacokinetics | Acetazolamide (kinetics). 

<p>
Fixed hemodialysis. HumMod was taking calories from the
body in ultrafiltrate but was not taking the water lost
from body water. So HumMod developed a sever hypothermia
and fibrillated. Fixed XML is in Structure\BloodVolume\
PlasmaVol.DES. Added a reference at Structure\H2O\BodyH2O.
Thanks to David Julian.

<p>
Shivering was quantitatively incorrect -- calories produced
was too small. Added a reference file at Structure\Heat
named HeatShivering.REF. It cites the gold standerd reference.
Structure XML is at Structure\Heat\HeatShivering. Panel is at
Heat | Movement | Shivering. This needs some validation next.

<p>
2013-02-08. HumMod version bumped to 2.0.46. For the 12
major organs, I cleaned up the look of the fuel panel.
This is cosmetic only.

<p>
2013-02-05. HumMod version bumped to 2.0.45. Calculation
of collecting duct and bladder urine pH has been revised
to include the concept of a negative SID, although first
principle calculations do not yet exist. The status of
this is noted in Structure\AcidBase\PhUrine.REF.

<p>
Modified structure XML is in AcidBase\PhUrine.DES,
Bladder\Bladder.DES and Nephrons\CollectingDuct\CD_Ph.DES.
Results are visible at Organs | Bladder, Organs |
Kidney ... Excretion | Urine and Organs | Kindey ...
Excretion | Acid-Base.

<p>
Testing starvation (H2O ad lib only). Control after
1 day. Starvation for 1 week.

<table>
<tr><td></td><td>Control</td><td>Starvation</td></tr>
<tr><td>Weight</td><td>163</td><td>152</td></tr>
<tr><td>Body H2O</td><td>42.7</td><td>39.4</td></tr>
<tr><td>Blood [Na+]</td><td>138.6</td><td>131.1</td></tr>
<tr><td>" [K+]</td><td>4.2</td><td>3.3</td></tr>
<tr><td>" [Cl-]</td><td>103.8</td><td>98.6</td></tr>
<tr><td>" [KA-]</td><td>0.7</td><td>2.8</td></tr>
<tr><td>Urine pH</td><td>6.05</td><td>4.34</td></tr>
<tr><td>" [KA-]</td><td>2.6</td><td>145.5</td></tr>
<tr><td>" [NH4+]</td><td>27.1</td><td>80.5</td></tr>
<tr><td>Blood [Glucose]</td><td>99.2</td><td>57.9</td></tr>
<tr><td>" [Insulin]</td><td>17.8</td><td>7.6</td></tr>
<tr><td>" [Glucagon]</td><td>69.7</td><td>230.2</td></tr>
<tr><td>Vein pH</td><td>7.37</td><td>7.30</td></tr>
<tr><td>Brain % Glucose</td><td>93</td><td>34</td></tr>
</table>

<p>
2013-02-05. I informally reviewed HumMod's XML to see
just how well-formed its XML is. Well formed in the
XML world means that the document conforms to the
basic rules of XML. Some edits were made.

<p>
Mixed Content. Mixed content is content within an XML
element that contains both text and child XML elements.
This is allowed in XML -- which is understandable since
XML is the offspring of Standard Document Markup
Language (SGML). As its name states, it is a document
markup language. So all of the text (including file
headers and occasional annotation) is mixed content
and is well formed.

<p>
Mixed content makes XML more human readable. But it
can drive parsers crazy when the parsers are meant for
documents moving data from computer to computer.
HumMod's parsers support mixed content and this is
meant to help persons reading and editing the XML.

<p>
XML documents should not contain free text before the
opening root (document) tag and after the closing root
(document) tag. I edited HumMod.DES to make it
conform.

<p>
There are 5 ASCII characters that are not allowed in
XML element content. There characters must be represented
by a character entity, which begins with an ampersand
and ends with a semicolon. The characters and their
character entities are

<ul>
<li> Less than (&lt;) : &amp;lt;
<li> Ampersand (&amp;) : &amp;amp;
<li> Greater Than (&gt;) : &amp;gt;
<li> Apostrophe (&apos;) : &amp;apos;
<li> Quotation Mark (&quot;) : &amp;quot;
</ul>

<p>
HumMod's parsers do not honor these character entities,
so to have well formed XML these characters or their
entities must not appear in XML content (except inside
XML comments).

<p>
I replaced ampersand with and in 6 display files.
<ul>
<li> ...\Lifestyle\Exercise\Treadmill\Summary.DES
<li> ...\Miscellaneous\Torso\Lower\Capillaries-Lymph\Capillaries-Lymph.DES
<li> ...\Miscellaneous\Torso\Middle\Capillaries-Lymph\Capillaries-Lymph.DES
<li> ...\Miscellaneous\Torso\Upper\Capillaries-Lymph\Capillaries-Lymph.DES
<li> ...\Organs\KidneyExcretion\Bicarbonate\\BicarbonateExcretion.DES
<li> ...\Organs\KidneyExcretion\Chloride\\ChlorideExcretion.DES
</ul>

<p>
I replaced quotation marks with dashes from 2 display files.
<ul>
<li> ...\Disgnosis\Chart\Symptoms.DES
<li> ...\Organs\Bladder\Proteinuria.DES
</ul>

<p>
2013-02-04. Added a ... Metabolism submenu to Kidney
under organs. This makes the Organs menu a bit busy,
but it gets some important stuff up to the top. This
submenu will display kidney gluconeogenesis, ammonia
formation and ketoacid metabolism -- all interrelated.

<p>
Added an Acid-Base panel to Kidney ... Excretion to
help track acid-base status, particularly renal
excretion. Panel is visible at Organs | Kidney ...
Excretion | Acid-Base.

<p>
Changed the way the kidney handles ketacids to reflect
saturable and non-saturable reabsorption. XML is at
Structure\Nephrons\NephronKetoacids. Display at Organs |
Kidney ... Excretion | Ketoacids.

<p>
2013-02-03. HumMod version bumped to 2.0.44.

<p>
Calculating urine pH in collecting duct and bladder.
The general tool is located in Struncture\AcidBase\PhUrine.

<p>
ADDED LATER - this does not work correctly during starvation
and is now under review (2013-02-05).

<p>
The strong cations used are [Na+] and [K+]. The strong
anions used are [Cl-] and [KA-].

<p>
Bladder pH is calculated at Structure\Bladder\BladderPh.
Acid-base status is displayed at Organs | Bladder.

<p>
Collecting duct pH is calculated at Structure\Nephrons\
CollectingDuct\CD_Ph. Acid-base status is displayed at
Organs | Kidney ... Excretion | Urine.

<p>
2013-02-02. HumMod version bumped to 2.0.43.

<p>
Under Display | Organs | Kidney, HumMod had a ... Nephrons
submenu. I added a second submenu labeled ... Excretion
listing panels related to renal excretion -- most notable
the Urine panel.

<p>
I'm not totally sure about this, but after doing some
reading I demoted inorganic phosphate and sulfate from
strong anions to weak anions in the blood SID calculation
and display. Math is at Structure\BloodIons\BloodIons.DES.
Display is at Diagnosis | Blood Chemistry | Sample.

<p>
Moved Metabolism | Lipid Deposits to Organs | ... Lipid
Deposits under Adipose Tissue.

<p>
Moved Metabolism | Liver Metabolism to Organs | ... Metabolism
under Liver.

<p>
2013-02-01. HumMod version bumped to 2.0.42.

<p>
In response to a report from Matteo Pecchiari in Milan,
I checked out HumMod's bladder. It does accumulate protein.
Added clinical units for [Protein] of mG/dL and calculated
severity of proteinuria as Trace, 1+, 2+, 3+ and 4+. Structure
is at Bladder\BladderProtein. Display is at Organs | Bladder
using a new Proteinuria box. Severity is described in info
box.

<p>
2013-02-01. Adding some comments on launching ScriptedController
with the script to be run specified in the command line.

<p>
The ScriptedController plus script info can be launched using
the Command Prompt utility (cmd.exe) or a shortcut to the
ScriptedController configured with the requisite information.
In both cases, the information needed is identical.

<p>
A word about Windows. Windows supplies applications with two
items descibing the command line. The first is a string with
the complete contents of the command line. The second is an
array of strings with the contents of the command line parsed
into the array. The delimiter for this parser is whitespace.
So a path containing one or more spaces is potential trouble.

<p>
To make this work, the system parser treats all text within
double quotes as a single item. You can see this working by
right clicking any desktop icon and then selecting properties.
Notice the target specification safely in double quotes.

<p>
SciptedController expects the name of the app in array element
zero (which it ignores) and the XML script specification in
array element one. So when using the Command Promptput or a
shortcut put a pair of double quotes around the application
specification and a second pair of double quotes around the
script specification XML.

<ul>
<li> Double quotes around app and script specification.
<li> Single quotes won't work.
<li> File names, paths and drive letters are not case sensitive
in Windows.
<li> The .exe or .EXE name extension for executables is optional
but the .Script (or whatever) name extension is required for
scripts.
<li> Use properly formed and valid XML as decribed below.
</ul>

<p>
2013-01-31. The command line schema for the ScriptedController
is

<p>
&ltroot&gt;&ltscript&gt; Valid Script Name &lt/script&gt;&lt/root&gt;

<p>
XML content in the command line takes precedence over the
startup information in the registry. Note also that you
can hold down the control key (Ctrl) when launching the
ScriptedController and both the command line content and
registry information will be ignored.

<P>
2013-01-28. This log described mods made to HumMod on
2012-11-05 upgrading the fuel selector. The version was 2.0.39.
But this version was never pushed so I've deleted the notes
and will recreate the appropriate mods now.

<p>
2013-01-28. HumMod version bumped to 2.0.41.

<p>
HumMod previously used a linear predictor to predict fatty
acid vs. glucose use in each of the major organs. This
worked OK with normal deliveries but not with unusual
deliveries -- specifically brain ketoacid use during
startvation.

<p>
So I replaced this predictor with a non-linear one that
is much better. The expense is that fatty acid preference
is no longer a working parameter. There is a detailed
reference in Structure\FuelSelector. The new predictor
is visible at 'Organ' | Fuel for each organ.

<p>
2013-01-27. Bumped HumMod 2.0.39 to 2.0.40.

<p>
I've renamed the structure folder and structure file
from VascularCompartments to BloodVessels. This is
just a matter of style.

<p>
Reorganized the menus and panels under Circulation |
Blood Vessels to create 3 major groupings

<ul>
<li> Arteries
<li> Veins
<li> Lungs
</ul>

<p>
2013-01-26. Bumped HumMod 2.0.38 to 2.0.39.

<p>
There were 4 occurances in 2 files where the empty
element &lt;integer/&gt; was referred to as
&lt;integer&gt;. Fixed.

<p>
The goal is to go 1 week in steady-state in 2000
steps or less. But 2.0.38 would slow at about 5
days and required about 5300 steps. This slowing
was caused by LeftAtrium.DxMax being slightly too
large (0.005 * Compliance) -- leading to a bit of
jitter. So I decreased it to 0.0001 * Compliance.
Now it uses 2207 steps (460 retries) in EXE and
2231 steps (513 retries) in Modular.

<p>
2013-01-12. The design with ScriptedController and
InteractiveController is to use simple schemas for
saving and loading initial conditions and solutions.
These two schemas were installed about a year ago
(I'm guessing). Older files will not be compatible
and will not parse.

<p>
These two schemas are specified in the applications
at Docs\Schemas\... and are repeated here.

<p>
&lt;ics&gt;
<br>
&lt;var&gt;
<br>
&lt;name&gt; Name &lt;/name&gt;
<br>
&lt;val&gt; Value &lt;/val&gt;
<br>
&lt;/var&gt;
<p>
More vars here.
<p>
&lt;/ics&gt;

<p>
&lt;solution&gt;
<br>
&lt;var&gt;
<br>
&lt;name&gt; Name &lt;/name&gt;
<br>
&lt;val&gt; Value &lt;/val&gt;
<p>
More values here.
<p>
&lt;/var&gt;
<p>
More vars here.
<p>
&lt;/solution&gt;

<p>
Note that unstructured text is allowed before the
opening root tag and after the closing root tag.

<p>
2013-01-08. In the ClientController, the pipe polling
interval appears to be 1000 mS, as seen in Advanced |
Pipe. This interval (which is large) could add to the
latency. The default interval for the other modular
components is 200 mS -- providing pretty decent
performance.

<p>
2013-01-07. Some of the tests reported below used a
desktop with an Internet connection. Characterized
the desktop using Belarc Adviser. It is an HP with
4 core AMD running at 2.9 gHz on 6 mBytes RAM.

<p>
Characterized the Internet connection using speedtest.net.

<ul>
<li>
Ping : 10 mSec
<li>
Download : 19.8 mBytes/Sec
<li>
Upload : 3.6 mBytes/Sec
</ul>

<p>
2013-01-07. Then pinged some destinations that we
use. Results are reported in mSec.

<ul>
<li>
hummod.org : 60 mSec
<li>
digitalhumanmodels.org : 94 mSec
<li>
biosim.com : ICMP is blocked, but rather fast.
<li>
ip-50-63-52-240.ip.secureserver.net : 69 mSec --
this is the URL that the ClientController talks
to (more on this below).
<li>
solveradmin.connect-technologies.net : 69 mSec
<li>
github.com : 59 mSec
<li>
google.com : 75 mSec
</ul>

<p>
2013-01-07. Restart on HumMod.EXE is too quick to be
measured -- maybe 10 to 100 mSec. Restart on client -
server is 2.97 Sec. Considering nearly zero elapsed
time on the controller and on the model solver, it
appears that the time cost of communication for a
single transaction is about 3 seconds. Note that a
restart returns a values frame and all of the starting
map data. Client to server communication was 1 message
in 1792 bytes. Server to client communication was 1
message in 183,285 bytes.

<p>
But some of the time cost in the above test may be due
to message size. So I picked Advanced | Variables and
then clicked on a variable name. This triggers a round
trip fetch of details for the named variable -- with
very small message content. Client to server is 1
message in 65 bytes. Server to client is 1 message in
216 bytes. Elapsed time was 2.88 seconds. So the
latency appears to be inherent and only slightly
dependent on the message size.

<p>
2013-01-06. Summary of 6 hour, steady-state protocol
in various environments. Values are elapsed time in
seconds.

<ul>
<li>
HumMod.EXE : 3.32 Seconds.
<li>
Interactive Controller - Model Solver : 5.15 Seconds.
<li>
Scripted Controller - Model Solver : 4.18 Seconds.
<li>
Client - Server : 7.41 Seconds.
<li>
HumModWeb : 2.67 Seconds.
</ul>

<p>
2013-01-06. One more 6 hour steady-state protocol. This
one used HumModWeb (v1.0.1) with the source XML coming
from HumMod v2.0.0 (I think) (266,934 tags). The
environment was the same desktop used in the other tests,
Windows 7 and FireFox 17.0.1.

<p>
Loading required 9.8 seconds and the 6 hours steady-state
test was completed in 2.67 seconds. First and repeated
simulations were all roughly the same speed.

<p>
2013-01-06. ClientController Notes

<p>
The most recent ClientController has its own application
name, icon and registry key. The executable is smaller
than before, suggesting that the debugging hooks have
been removed.

<p>
ClientController.exe 1,128,960 bytes 6/28/2012 (Old)
<br>
ClientController.exe   324,608 bytes 1/6/2013 (Current)

<p>
We also need a config file present in the executable
directory -- for some unknown reason.

<p>
ClientController.exe.config 1,742 bytes 6/28/2012 (Old)
<br>
ClientController.exe.config 1,873 bytes 1/6/2013 (Current)

<p>
To install the ClientController, go to Advanced | 
Solver - Model.

<p>
The solver specification must point to any existing path
on the client machine. It is parsed and then ignored. I
made the mistake of setting it to an empty string. The
path parser failed, threw an exception, and shut down
the client. The only way to repair this, I think, is to
use regedit.exe to enter the registry and edit in a
valid entry.

<p>
The the model specification is significant since it
points to the model XML on the server. The correct
entry is

<p>
c:\Websites\HumMod\library\HumMod.DES

<p>
2013-01-06. I repeated the 6 hour steady-state protocol
described below using the server - client environment and
the same desktop as used below. HumMod version was 2.0.15.

<p>
Startup (launch client to draw chart panel) required 21
seconds. Model solver used 2.81 seconds to parse the XML
(274,092 tags). This suggests that the server is fast enough,
but keep in mind that no disk writes are involved. Client
used 3.70 seconds to parse the display message (562 panels).
This is rather slow. Startup messaging consisted of 3
messages in 2020 bytes from client to server and 4 messages
in 2,827,261 bytes from server to client.

<p>
The 6 hour steady-state protocol runs in 7.41 seconds. The
display interval with this version of HumMod is 60 minutes,
so a total of 6 value frames were returned (1235 mS per
frame). The solution used 190 steps and 46 retries with an
average step size of 1.89 minutes. Messaging consisted of
1 message in 107 bytes from client to server and 6 messages
in 805,478 bytes from server to client.

<p>
There appears to be a large amount of network traffic involving
the client and server EVEN when both the client and model
solver are idle. No bytes are moved so this appears to be
handshaking. Traffic stops when the client is closed. This
can be monitored using Resource Monitor.

<p>
2013-01-04. I ran some timing tests to get basic information
before jumping into the compression discussion. Tests involved
6 hours of steady-state with no run in at the start. Solution
interval was 360 minutes with display at 30 minutes. All tests
used HumMod v2.0.39.

<p>
The first test used HumMod.EXE. Elapsed time was 3.32 seconds.
Solution required 328 steps with 17 retries. Average step size
was 1.1 minutes. In this environment, there is no communication
time since the solver algorithm writes directly into the display
buffer. Visible panel is updated (including graphs). A total of
12 solution sets was delivered by the solver to the display buffer.
Note that this version of HumMod uses its own numerical methods,
so results may not compare directly to the following test.

<p>
So the take away here is that solution and panel refresh for
this protocol requires about 277 mS per display interval with
no communication cost. The cost of solution vs. cost of panel
update cannot be teased out.

<p>
The second test used the Interactive Controller (v1.1.14) and
the Model Solver (v1.0.14). The pipe polling interval was
200 mS. Elapsed time was 5.16 seconds. Solution required 321
steps with 16 retries. Average step size was 1.12 minutes. The
same 12 sets were delivered by the solver through the bidirectional
pipe. Visible panel is updated (including graphs).

<p>
A repeat took 4.95 seconds. Controller to Solver communications
consisted of 1 message and 107 bytes. Solver to Controller
communications consisted of 6 messages and 882610 bytes. Note
that more than one values frame will be packed into a message
if solution values are available in a timely fashion.

<p>
So the take away here is that solution plus communication plus
panel update requires 430 mS per display interval. Using the
previous results yields 277 mS for solution and display and 153
mS for communication. The only significant communication runs
from Solver to Controller. The communication cost consists of
message creation, transport, and message parsing and consumption.
Note that Controller and Solver are both running on the same
CPU, so that time slicing is at work.

<p>
For perspective, I profiled the startup timing -- when the Model
Controller is launched and it in turn launches the Model Solver
and it in turn parses the model. Startup is complete when the
Controller displays the first panel and signals 'Ready'.
Elapsed time was 8.65 seconds. Model Solver parsing time was
2.73 seconds (303400 tags). Model Controller parsing time was
0.89 seconds (602 panels defined in an incoming message).

<p>
Checking the message boxes showed that Controller to Solver
messages consisted of 3 messages and 6912 bytes. Solver to
Controller messages consisted of 4 messages and 3209222 bytes.
These are all one time messages used to install the Controller.

<p>
The absolute fastest that the model can run when it is in
steady-state and after it has settled into steady-state. To
document this, I ran for 6 hours and then an additional 6
hours -- timing the second part of the protocol. When looking
at these numbers, there is a very important consideration --
after the solver receives a gofor or goto message, it does
not wait on the pipe. It calculates away until the solution
is complete and results (value frames) are dumped into the
pipe (or its buffer) as they become available.

<p>
The Solver advanced the solution in 113 steps and 26 retries
over 1.70 seconds or 142 mS per display interval. This is as
fast as it will go. The Controller required 2.77 seconds or
231 mS per display interval. 

<p>
I'm just going to review message traffic here to make sure.
<br>
Startup : 3 To Solver in 6912 Bytes. 4 to Controller in 3209222 Bytes.
<br>
First 6 Hours : 1 to Solver in 107 Bytes. 6 to Controller in 882610 Bytes.
<br>
Second 6 Hours : 1 to Solver in 107 Bytes. 6 to Controller in 884515 Bytes.

<p>
Next, I wrote a script that duplicated the 6-hour steady-state
protocol and executed it using the Scripted Controller. Total
elased time was 12 seconds. Script parsing time was 0.03
seconds and model parsing time was 2.75 seconds. There were
3 Controller to Solver messages of 259 bytes and 13 Solver to
Controller messages of 2151794 bytes. These Controller incoming
messages were both startup and solution messages.

<p>
Solution used 327 steps and 15 retries with an average step-size
of 1.10 minutes. Solution elapsed time was 4.18 seconds.

<p>
Total Takeaway (based on impressions rather that hard numbers).
Values are in mS per display interval.
<br> Solution : 142 and up. Depends on size of interval and transients.
<br> Calculating : 132 and up.
<br> Waiting For Timeslice : 10. Could be faster or slower on server.
<br> Panel Update : 1. Will be slower when maps are visible.
<br> Messaging : 100
<br> Message Creation : 1
<br> Transport : 49 for file system. Might be slower over the wires,
but might be faster since multiple processors are involved.
<br> Parsing : 40
<br> Polling Inefficiency : 10 but none over Internet

<p>
Remember that after decompressing the complete message must still be
parsed. So the critical question is whether or not the time required to
compress and decompress is more or less than the time saved in transporting
a smaller message. An algorithm such as ZIP is great on size but terrible
on time, so it will probably will be bad news. What is a better algorithm?
I don't know.

<p>
The other thing that strikes me is that the rate limiting step is either
the rate at which the server can calculate and push out packets or the
rate at which the browser can consume the packet. For the first display
interval in a solution, the transport time might be significant. At all
other times, it won't be significant and the compression / decompression
will just be an added burden.

<p>
And then another thing struck me. Windows (I think) does a delayed write
in its file system. This means that it actually writes to memory and then
flushes memory to the disk drive later when it is not busy. But if we
run a pipe that gets a write and 200 mS or less does a read and then
delete, the data never goes to disk and the system is fast. So the
numbers that I got here could be fast and misleading.

<p>
2012-12-18. ScriptedController version bumped to 2.0.10 with
a try-catch construct added to StorageDumper.MakeRoster().

<p>
ScriptedController was throwing an <i>ArgumentOutOfRangeException</i>
on the following sequence.

<ul>

<li>
ScriptedController is executing a script and asks the ModelSolver
to change a value or to advance the solution.

<li>
But a runtime error occurs and the expected results don't come back.

<li>
Instead, a run report comes back. It is displayed or logged.

<li>
Then execution of the script continues. If the script attempts to
dump the expected results specified by index, the results are not
there and the specified index is out of range. An exception is
thrown.

</ul>

<p>
So we try to get a value at the specified index. But if the value
does not exist, the index is out of range. An exception is thrown
AND caught. We then use "N/A" as the image.

<p>
2012-12-12. Added data and references to the Starvation
page in HumMod Repository under data.

<p>
2012-12-08. Added a page with data on posture and hemodynamics
using data from Loring Rowell. Visible in HumMod Repository
under Data | Posture &amp; Hemodynamics. Good references.

<p>
2012-12-07. ModelSolver.EXE has been repaired and its
version number bumped to 1.0.14.

<p>
Thanks to Drew for pointing out this problem. ModelSolver's
XML parser did not process relative file names correctly.
The offending code is in PFileManager.CS. I never liked this
code and now it has been repaired using the proper .Net
calls.

<p>
Fully qualified file name - Complete name from drive letter
to file extension.

<br>
Relative name - name and location of a file relative to the
current directory.

<br>
Current directory - a directory location stored by the
operating system. By default it is the directory holding
the executable code.

<p>
The HumMod XML parser should be able to handle both
fully qualified and relative file names as specified by
the <i>include</i> and <i>path</i> processing instructions.
But it botched a relative name in the model solver's root
directory. Fixed. My bad.

<p>
2012-11-03. Here is what I put in 
InsulinReceptors-Liver.REF.

<p>
<i>
Hepatic insulin receptors can really scarf up
the insulin. So net binding is always flow
limited to some extent. This is very important
when hepatic plasma flow is low.
</i>

<p>
So HumMod uses mass balance at hepatic insulin
uptake. XML at Structure\Insulin\InsulinReceptors-Liver.
Visible at Hormones | Insulin | Beta Cells | Insulin
Receptors.

<p>
2012-11-03. Insulin concentration in the pool is now
also available in pMol/L.

<p>
2012-11-03. Broke insulin formation into separate
synthesis and secretion panels to provide more detailed
information. No new XML. Visible at Hormones | Insulin
| Beta Cells and then Synthesis and Secretion.

<p>
2012-11-03. HumMod now calculates and displays [Insulin]
at the pancreas beta cells. This concentration modulates
insulin secretion. XML at Structure\Pancreas\Insulin.
Visible at Organs | Pancreas | Insulin and Hormones |
Insulin | Beta Cells | Secretion.

<p>
2012-11-03. HumMod now calculates and displays [Glucagon]
at the pancreas alpha cells. This concentration modulates
glucagon secretion. XML at Structure\Pancreas\Glucagon.
Visible at Organs | Pancreas | Glucagon and Hormones |
Glucagon | Alpha Cells.

<p>
2012-11-02. Skeletal muscle metabolism did not respond
(at all) to changes in posture -- because the logic in
PostureEnergy was not properly coded. My bad. Fixed.
Thanks to Drew for documenting this one.

<p>
2012-11-02. The correct descriptor of renal alpha
agonism is Kidney-AlphaReceptors.Activity. Activity
normal value is 1.0. Incorrect references (parameter
stubs) were replaced in Structure\Nephrons\ProximalTubule\PT_Na
and Structure\Nephrons\VasaRecta. And, thanks to Drew for
this one.

<p>
2012-11-02. HumMod v2.0.38. The correct case for the
system constant pi is 'Pi'. Replaced 'PI' with 'Pi'
in Structure\Orthostatics\Hydrostatics. Tilt table
is now functional. And, thanks again  to Drew for this
one.

<p>
2012-11-02. Total, endocrine, alpha cell, beta cell,
delta cell, other cell and exocrine blood flow. XML
is at Structure\Pancreas and then Pancreas-Flow. Visible
at Organs | Pancreas | Circulation.

<p>
2012-11-02. Need a conductance scaler obtained from the
GI tract to scale the adrenal gland and pancreas. Its
name is Conductance_X_Normal. XML in GITract-Flow.
Visible under Organs at GI Tract | Circulation and also
at the Adrenal Gland and Pancreas.

<p>
2012-11-02. The hemodynamics of the portal vein, hepatic
artery and hepatic vein are now visible at Circulation |
Blood Vessels | Splanchnic Veins. Portal vein blood flow
and constituents are now visible at Organs | ... Portal
Vein.

<p>
2012-11-02. A blood chemistry consult must now be requested
rather than being automatic. Of course, a sample is needed. 

<p>
2012-11-02. HumMod v2.0.37. Gave [Glucagon] additionalal physical
units of pMol/L. XML in Structure\Glucagon. Visible in Hormones
| Glucagon. 

<p>
2012-11-01. Starvation simulations indicate that additional
precision is needed at insulin and glucagon into the portal
circulation. I'll build this on a detailed pancreas circulatory
system.

<p>
But to warm up, I built a detailed adrenal gland circulation.
XML is at Structure\AdrenalGland. Visible at Organs | Adrenal
Gland.

<p>
2012-11-01. By the second day of starvation, insulin mass
(and [Insulin]) have gone negative. Needs some work on hepatic
insulin receptor binding. Loss of physiology out at the edges.
Next.

<p>
2012-11-01. Blood chemistry is now displayed as the result of
a blood sample. There is a separate panel for blood gases.
XML in Structure\BloodGases. Visible under Diagnosis.

<p>
2012-11-01. Some submenus seemed too deep to me and this was a
pain. Specifically moved up GI Lumen and Nephrons to the next
higher menu -- Organs. Show child-like dependence using elipses
(...).

<p>
2012-10-30. Absoption of water from the gut lumen could continue
all the way down to a negative volume. Added limits that stop
absorption when the gut is empty. XML at Structure\GILumen and
then GILumenH2O.

<p>
Now, as the H2O volume in the gut decreases, the osmolarity
produced by residual fiber goes up. And if the fiber washes
out (future work) absorption, vomitus and diarrhea stop as
gut H2O volume approaches a small value near 0.

<p>
2012-10-30. Added functionality to bladder, including a request
for urine analysis followed by display of results. The XML is
located at Structure\UrineAnalysis with major edits at
Structure\Bladder. Visible at Organs | Bladder and Diagnosis |
Urine Analysis.

<p>
Bladder is now scaled and properly initialized.

<p>
2012-10-30. The cleanest way to model fasting and starvation is
to go to Lifestyle | Diet | Control, select fixed intake and set
the fixed intake value to 0. Water intake will continue. To get
complete deprivation, add a fixed water intake of 0.

<p>
2012-10-30. HumMod v2.0.36. XML in Structure\LungVeinO2 called
the wrong function in converting [O2] to pO2. Fixed. This error
was not a propagating error.

<p>
2012-10-29. Repository now displays Excel workbooks as HTML, rather
than pushing the xlsx through zoho.com.

<p>
2012-10-29. David Julian has pointed out that it is possible to
create an exercise protocol where the subject goes until he
fibrillates rather than just quitting. Also the toleraable
exercise durations were way, way too long. So there were a couple
of things wrong. Now fixed. Further details are in Structure\Exercise
Exercise-Control.REF and Exercise-Motivation.REF.

<p>
2012-10-29. HumMod 2.0.35. CO2 dissociation submodel is installed.
Relevant structures are located in Structure\CO2. The algorithm is
implemented in CO2_pCO2_To_[HCO3] and CO2_[HCO3]_To_pCO2. CO2Blood
is a wrapper for blood work.

<p>
The CO2 dissociation curve is displayed in relevant places using
the ShowMap display object. The algorithm is presented by the [i]
button. Blood work is displayed at Respiration | CO2 | Arteries
and Veins. There is also a CO2 calculator on this pop down. Major
organ CO2 dissociation is visible at Organs | 'Organ Name' | CO2.

<p>
2012-10-24. HumModRepository. The 'Log' cloud button
on the home page is now smaller - indicating that it
is a more minor selection than the other selections.

<p>
2012-10-24. HumModRepository. A variety of spreadsheets
are now relevant. They are now listed and linked separately
on the 'Normal Values' home page.

<p>
Zoho is used to display the Xcel spreadsheets. A rather
complex URL is used. It begins with

<p class='Indent'>
  href='https//sheet.zoho.com/view.do?

<p>
And continues with

<p class='Indent'>
  url=http://hummod.org/autodoc/NormalValues/'Sheet Name'.xlsx'

<p>
2012-10-24. HumModRepository. Data. CO2Transport. This Web page
describes a submodel of CO2 transport in blood which will be
embedded in HumMod to get accurate values of [HCO3] as a funcion
of pCO2 and [SID]. The model is

<p class="Indent">
[HCO3] = K * (pCO2/(p50 + pCO2))
<br>
K = k' * [SID]
<br>
p50 = 32

<p>
The previous model was linear and was fit across the lungs. So, it
worked just great across the lungs for steady-state. But it worked
very poorly for venous values during exercise, when pCO2 is high and
[SID] is decreasing as a function of [Lac].

<p>
where K is a linear function of [SID]. We fit k' to the appropriate
data sets. Then during solutions, [HCO3] is calculated as a function
of the prevailing pCO2 and [SID].

<p>
2012-10-24. Repository. Reference Dot.png corrected to Dot.PNG.

<p>
2012-10-19. Version to 2.0.34 with addition of
metabolic units concept to O2 uptake. Structure is
in LungGases\MetabolicUnits (including a REF).

<p>
Variable is visible at Respiration | Gas Exchange |
O2 Uptake.

<p>
Now specifying treadmill settings in both grade (%)
and degrees. XML is in Exercise-Treadmill with
an accompanying REF.

<p>
Variable is visible at Lifestyle | Exercise |
Treadmill.

<p>
Subject must now be standing in order to use the
treadmill.

<p>
2012-10-16. Cloned library-private to the HumMod2
working directory to access the very first edit of
v2.0.33. This is the classical circulatory description
using VascularCompartments.

<p>
2012-09-13 HumMod version bumped to 2.0.33.

<p>
Added some constants to Structure\Metabolism\
Metabolism-Tools.DES to be used in stoichiometry.

<p>
Roughed out energy dynamics for skeletal muscle
using [ATP], [PCr] and [Pi]. XML is at Structure\
SkeletalMuscle\SkeletalMuscle-Energy.DES and
Structure\RespiratoryMuscle\RespiratoryMuscle-
Energy.DES. Panels are visible at Organs |
...Muscle | Energy.

<p>
Installed a calculator to calculate hemoglobin
O2 content and saturation as a function of pO2.
Influences are temperature, pH, pCO2, CO and
[Hgb]. XML is located at Structure\Hemoglobin\
HgbCalculator. Panel is visible at Body Fluids |
Blood | Hemoglobin | Calculator.

<p>
2012-09-12 HumMod version bumped to 2.0.32.

<p>
First the problem -- as logged yesterday, HumMod
produces large amounts of lactic acid during work,
develops a fatal acidosis and fibrillates. The model
starts going anaerobic at skeletal and respiratory
pO2's of 20 Torr.

<p>
But there is some very good data available --
using MRI to monitor myogloblin desaturation --
that indicates that skeletal muscle pO2 goes
very low (3 to 5 Torr) with only moderate workload
and no anaerobic metabolism.

<p>
I've documented this in Structure\SkeletalMuscle\
SkeletalMuscle-Flow.REF.

<p>
The correction was to start anaerobic metabolism
when venous pO2 falls below 8 Torr. Note that
venous pO2 might be a couple of Torr greater than
cytosolic due to a large but still finite diffusing
capacity. Corrected curves are visible in Structures\
SkeletalMuscle\SkeletalMuscle-Flow and the comparable
RespiratoryMuscle DES file.

<p>
2012-09-11 HumMod version bumped to 2.0.31.

<p>
First, the problem -- as pointed out by David Julian
(thank you, David). When the daily planner was turned
on, HumMod would die in V-Fib at about 8:30 AM on the
first day, about 1/2 hour into exercise. The exercise
was 50W but was massively anaerobic. HumMod stops
bike and treadmill exercise when conditions become
intolerable, but work continues no-matter-what. This
allows me to shake down the model. So [Lac-] increased
to 30+ mEq/L and HumMod fibrillated as it should.

<p>
The work session was massively anaerobic because the
increase in cardiac output was inadequate. This was
puzzling because HumMod can do 50W of bike with no
trouble. BUT, HumMod is standing when doing work and is
usually recumbent when on the bike. The problem, then,
was that HumMod had accurate pooling when standing
very quietly but this pooling also continued during
muscular activity. Standing plus activity was not
accurately modeled. My bad.

<p>
Loring Rowell has gone into excellent detail in
Human Cardiovascular Control.

<p>
Pollact, A.A. and E.H.Wood. Venous pressure in the
saphenous vein at the ankle in man during exercise
and changes in posture. J.Appl.Physiol. 1:649, 1949.

<p>
There are some other references also.

<p>
Structure VenousValves replaces structure LegMusclePumping.
Structure BVSeqVeins gets some major edits. The panel in
orthostatics that shows sequestered blood volume in veins
gets considerable more detail.

<p>
Note that 2.0.31 still cannot make it through one day of
daily planner. I'll fix that tommorrow and put it in
2.0.32.

<p>
2012-09-06 A couple of pushes had incorrect version
numbers in the commit comments. Here is an accurate
list of versions for this date.

<br>
ModelSolver Build : 2012-08-10 Version : 1.0.13
<br>
InteractiveController Build : 2012-08-10 Version : 1.1.14
<br>
ScriptedController Build : 2012-09-06 Version : 2.0.9
<br>
HumMod Edit  2012-08-09 : Version : 2.0.30

<p>
Note that I have correct some previous erroneous entries
in this log.

<p>
2012-08-13 HumMod version will go to v2.0.32 or greater
with a major rewrite of the basic circulatory physiology
and applied math. More on this later.

<p>
2012-08-10 ModelSolver version bumped to v1.0.13
with some major internal revisions. Revisions are
not visible externally.

<p>
Class deletes : IPC_In_RestartSilent, S_RestartSilent.
RestartManager cleaned up.

<p>
2012-08-10 InteractiveController version bumped to
v1.1.14 with some major internal revisions. Revisions
are not visible externally.

<p>
Class deletes : IPC_Out_RestartSilent.

<p>
2012-08-09 InteractiveController bumped to
version v1.1.13. The numerical cells in tables
were not formatting. Fixed.

<p>
2012-08-09 ScriptedController bumped to version
v2.0.7. The controller gets some new elements.

<p>
skipaheadonerror - activates the skipping service.
Will skip script elements on a runtime error until
a skiptohereon error element is encountered.

<br>
skiptohereonerror - this is the marker mentioned
above.

<br>
displayruntimeerrors - the default response to a
runtime error is now to log the error details but
to not display them. Use this element to request
a display.

<p>
2012-08-09 HumModXML bumped to version 2.0.30.

<p>
Cleaned up dosing for thiazide, digoxin and
midodrine. This was done partly to make sure
that the timer variables were working correctly.

<p>
2012-08-08 ModelSolver bumped to version 1.0.12.
NormalDist variable now returns a value from a
population with the correct mean and standard
deviation.

<p>
Fixed an error in the REM binary operator (this
is the modulus operator).

<p>
Completed timer variables. Daily planner, etc.
are now working.

<p>
2012-08-08 InteractiveController version bumped
to v1.1.12. Fixed the time tool to correctly
show seconds in the panel element showclock.

<p>
2012-08-08 ScriptedController version bumped to
v2.0.8. Had a problem with variable roster and
storage when running two scripts back-to-back.
Fixed.

<p>
ScriptedController now automatically asks for a
reset after the model solver has been launched
and the model has been parsed. No need (typically)
to put a reset in your scripts. But, if you do,
the extra reset won't hurt anything.

<p>
2012-08-07 Attempting to standardize all of the save
and load IC's and solutions schema, beginning with
InteractiveController and ScriptedController.
InteractiveController version has been bumped to
v1.1.11 while ScriptedController version has been
bumped to v2.0.5.

<p>
2012-08-07 HumModXML version bumped to 2.0.29.

<p>
In the Win32 environment (HumMod.EXE), radiobuttons
must be grouped by the coder. I used the maplist
element that defines the radiobutton labels to also
define the members of the group. Lifestyle | Daily
Planner | Schedule is a panel filled with radiobuttons,
but each button knows what group it is in.

<p>
In .Net framework, all radiobuttons in a panel are
automatically grouped into a single group. Therefore,
in HumMod 2.0.28 and earlier, all of the radiobuttons
in the Schedule panel have automatically be made
members of the same group. So I gave each hour its
own group box (which is inherited from panel). It
fixes the problem and looks cool -- but is pretty
ugly in EXE.

<p>
The solver sends the controller two type of communications:
pages and messages. Pages go out at the end of a successful
integration interval, so we don't get communications 
related to failed steps. Messages go out immediately. But,
up to 1.1.10, the interactive controller did not display
the incoming message. Fixed and bumped version to 1.1.10.

<p>
2012-08-06 HumModXML version bumped to 2.0.28. Kidney
now has cortical (outer and inner) and medullary (outer
and inner) zones for mass, blood flow and sodium
reabsorption. The idea that is developing is that
EPO secretion comes predominantly from cells in the
interstitium of the proximal tubule. Thus, we need
some zone data to implement EPO dynamics. Zone XML
is located at Structure\Kidney\Kidney-Zones and zones
are visible at Organs | Kidneys | Organ | Zones.

<p>
Kidney runs metabolism off of venous pO2 now,
rather than tubular pO2. Has a new panel in Metabolism.
Visible at Organs | Kidney | Organ | Metabolism.

<p>
Merged Kidney-O2 into Kidney-Metabolism. Metabolism
panel gets a more detailed O2 view. Visible at Organs |
Kidney | Organ | Metabolism.

<p>
2012-08-04 HumModXML version bumped to 2.0.27. Kidney
get a panel tree modification because the nephron stuff
was buried too deep. Brought it up one level. Visible
at Organs | Kidney | Organ or Nephrons.

<p>
HumModXML. Kidney gets a new panel showing details of
kidney O2 physiology. Visible at Organs | Kidney.

<p>
HumModXML cleaned up the calculation and display of
EPO secretion. The XML is at Structure \ EPO \
EPOSecretion. The display is at Hormones | EPO - the
secretion box.

<p>
2012-08-04 ModelSolver version bumped to v1.0.11
after the random number generator was repaired.

<p>
The normal distribution mean has a positive bias
-- because I was summing 7 samples and dividing
by 6 to get the mean. Code is in Var_NormalDistribution.
ModelSolver\Docs\Code\Model Solver Notes - Random
Numbers has documentation and screen grabs.

<p>
2012-08-04 InteractiveController bumped to
v1.1.9 after a repair. Controller will ask
the solver for variable, integral, implicit
and curve rosters. When Advanced is click, it
makes a dialog tab for each of these rosters.
In the Strucutes list box, it selects the first
structure. But a model with no entries in one
of the four roster listed above has no first
structure to select and the controller was
throwing an exception. Now it selects the first
structure only when there is a first strucute
to select.

<p>
2012-08-04 ModelSolver version bumped to v1.0.10
after solver got two repairs.

<p>
Variable WhiteNoise had no default values
for lower and upper limits. Now default lower
limit is 0 and default upper limit is 1.

<p>
Variable NormalDist had no default values 
for mean and standard deviation. Now default
mean is 0 and default standard deviation is 1.

<p>
2012-08-04 HumModRepository. Moved the log (this
file) up to the repository's home page. Want to
improve access.

<p>
2012-08-03 TheValidator (v1.0.1). Added Variables
main menu item. This menu item evokes a tabbed
dialog that lets you browse the models variables,
integrals, implicits and curves. May be useful after
a validation study produces a runtime error.

<p>
Wrote and pushed a brief users guild. Available at
Docs\UsersGuide.

<p>
2012-08-02 ModelSolver version bumped to v1.0.9.
Repaired a small error in the message parser.

<p>
2012-08-01 Pushing a pair of simulation tools,
TheValidator and TheBatchValidator. Will push
brief user's guides later when they are available.
Both utilities use the same schema and operate on
the same XML scripts.

<p>
TheValidator is interactive. It begins with a root
script and then lets you navigate to the validation
studies that are of current interest, avoiding time
consuming studies that not of interest.

<p>
TheBatchValidator begins with a root script also
(typically the same one) and sequentially does
all of the validation work in all of the child
scripts. Results are emitted as HTML and pushed
to Web site www.hummod.org/validation.

<p>
2012-07-31 The validation repo and Web site has had
a complete makeover using a new validation tool
called TheBatchValidator (not yet pushed, coming
soon).

<p>
2012-07-31 ModelSolver. Bumped version number to
v1.0.8. Added some muscle to the implicit equation
solver and fixed an off-by-one error that I think
was producing some annoying problems.

<p>
2012-07-25 Replacing Validator and ValidationTool
with TheValidator, a more interactive and desktop
oriented validation tool.

<p>
Validator and ValidationTool have been moved to
Archives.

<p>
2012-07-22 Started Blood Chemistry | Consult. This
service scans blood chemisty values and identifies
values that are too high or too low. XML is at
Structure\BloodChemistry. Visible at Diagnosis |
Blood Chemistry | Consult.

<p>
Respiratory and skeletal muscle glycogen synthesis,
metabolism and storage is now reported in both G
and molar units.

<p>
Up to now, some aspects of exercise physiology have
only been roughed out. Now I'm adding relevant detail.

<p>
SA-Node beta receptors was recalibrated to reflect a
strong neural (vs humoral) control of heart rate.
Documentation in Structure\Heart\SANode-BetaReceptors.REF.
Visible at Circulation | Heart Rate | Atria.

<p>
Arterial pressure (particularly SBP) increases in exercise.
We can expect a SBP of 170 - 180 mmHg at 200W.

<p>
Ekblom JAP 24:518-529, 1968.

<p>
This pressure increase is the result of the central
circulation having a greater tendency to pump blood
than the skeletal muscle has a tendency to vasodilate.
I had too much metabolic vasodilation in skeletal
muscle. Cut it back. Now pressure increases.

<p>
I moved the maximum tolerable lactate concentration for
skeletal muscle up from 30 mEq/L to 40 mEq/L. This will
benefit from additional data. 

<p>
2012-07-21 HumMod bumped version to v2.0.26. The major
edit here was a redo of the Suga-Sagawa model for the
right and left hearts. Transmural pressure (TMP) in
systole now has active and passive components. The
passive component is actually the diastolic P-V
relationship. As contractilty is lost, the TMP gracefully
degrades to the remaining passive component (ie. diastole).

<p>
2012-07-19 Model Solver bumped version to v1.0.7. Added
traps for invalid power function arguments. This function
is Math.Pow in C# and ^ binary operator in DES schema.

The C# edits are in MathOperators.CS. 

<p>
2012-07-19 HumMod bumped version to v2.0.25. HumMod will
cardiac arrest with severe acidosis. The XML is located
at Structure\Acidosis\CardiacArrest. Visible at Trauma |
Acidosis.

<p>
At the panel, you can choose never, chance or always.

<p>
2012-07-18 HumMod bumped version to v2.0.24. Respiratory
muscle metabolism is now a function of alveolar ventilation.
XML is at RespiratoryMuscle-Breathing with downstream
calculations at RespiratoryMuscle-Metabolism. Visible at
Organs | Respiratory Muscle | Breathing.

<p>
2012-07-18 InteractiveController bumped version to v1.1.8.
Put menu item 'X' in the main menu. Click on X to close
the current tabbed panel.

<p>
2012-07-17 InteractiveController. The default application
behavior on a parsing or runtime error is that the
application closes down. But this behavior can be overridden
using a selection in the Advanced tabbed dialog box.

<p>
All of the graphical panel elements are now clickable,
meaning that they expose underlying model variable values
when clicked.

<ul>
<li> Graph
<li> Bargraph
<li> Map
<li> Curve
<li> ValueBar
</ul>

<p>
2012-07-17 ScriptedController bumped to v2.0.4. Added the
scripting empty element continueonerror. After this element
is encountered in a script, runtime error details are silently
logged and execution of the script continues. Way cool!

<p>
2012-07-16 HumMod (v2.0.23). Put a spritz of initial [HCO3-]
into the brain to get it to start closer to steady-state.

<p>
Completely revised the respiratory center to allow it to
see (part of) the SID in the blood. The XML is in
RespiratoryCenter-Chemical. Visible at Respiration |
Respiratory Center | Chemical Drive.

<p>
2012-07-16 HumMod (v2.0.22). This version has compartments
for all lung gases with gas going in and out following
mass balance. XML in Structure\BloodGases. Stable integrals
were required. Visible at Respiration | Blood Gases.

<p>
Model can do breath holding. XML at Structure\BreathHolding.
Visible at Lifestyle | Breath Holding.

<p>
2012-07-11 HumMod (v2.0.21). Lung volumes are implemented,
but they have no function yet. Code at Lungs\LungVolumes
and panel at Respiration | Lung Volumes.

<p>
2012-07-11 Cerebrospinal fluid panel is complete. Visible
at Organs | Cerebrospinal Fluid.

<p>
2012-07-11 Glucose TMax in kidney is now a funcion of
nephron count. Code and panel locations are in a log
entry below.

<p>
2012-07-10 HumMod (v2.0.20). Added cerebrospinal fluid as
as organ. It doesn't do anything yet but secrete and absorb,
have a pressure (still under construction ... sorry).

<p>
2012-07-10 Put in a smooth transition in renal glucose
reabsorption between total reabsorption and maximal
reabsorption. Code is in Nephrons \ NephronGlucose.
Visible at Display | Organs | Kidney | Nephrons | More |
Glucose.

<p>
2012-07-10 Increased the TMax for Na+ a bit in distal tubule
and collecting duct. Still looking for trusted data.

<p>
2012-07-10 Repaired quantitation in distal tubule. Had too
large of an effect of Na+ delivery on K+ secretion. Data
was from David Young, incidently, but I interpretted it
carelessly.

<p>
2012-07-08 HumMod (v2.0.19). Pushing now. Insulin receptors
are complete.

Benchmarks. Stop insulin secretion. Blood levels of inulin
fall to about 40% of control at 10 hours. Severe ketoacidosis
at 1 day.

I am now completely redoing control of respiration to get
CSF into the model and to get acceptable metabolic and CO2
responses.

<p>
2012-07-04 General and hepatic insulin receptors with
general, hepatic and renal insulin degradation. Note that
the liver sees portal vein insulin concentration. Receptors
are visible at Hormones | Insulin | Receptors.

<p>
Insulin clearance is the sum of net liver binding, net
general binding and renal degradation. Visible at
Hormones | Insulin | Circulating.

<p>
Insulin's organ effects are a function of fractional
binding.

<p>
2012-07-01 HumMod (v2.0.19). Fuel uses organ plasma flow in
the denominator of some ratios. It also uses values derived
from O2 use in similar denominators. So when the model is
close to or in mortis, the organ flow or O2 use stops and
we get a divide by zero. Trapped this condition in all
twelve major organs.

<p>
2012-06-30 Starting to install insulin receptors.

<p>
2012-06-30 Repaired Organs | Organ Name | Fuel panel
labels. Most said Other Tissue rather than the actual
name of the organ.

<p>
2012-06-30 HumMod XML (v2.0.18). Added pituitary gland for
future development. Now has total, anterior and posterior
mass. Visible at Organs | Pituitary Gland.

<p>
2012-06-29. HumMod XML (v2.0.17) contains some small repairs
and styling.

<p>
2012-06-28. HumMod XML (v2.0.16) allows some randomness to
be added to any of the traits: age, height, adiposity,
muscularity and other mass. This allows multiple instances
to simulate a population. Visible and controlled at Context
| Summary.

<p>
2012-06-27. Pushing SolutionBrowser (v1.0.0). There is a
brief users guide in the documentation.

<p>
2012-06-24.Trends has been recast as SolutionBrowser with
a new github repo and a new VS C# project.

<p>
2012-06-23. Made a small edit to InteractiveController and
pushed. Hold down Ctrl key on launch to get to the Advanced
dialog box without having the application attempt a full
process.
 
<p>
2012-06-21. Bumped ScriptedController version to 2.0.3. Edited
<roster> and <rosteradd> elements to give <var> element
<name> and <format> child elements. Element <format> is
optional. When not specified, values are dumped without
formatting. Details in ScriptedController | Docs | Schema
| Script.

<p>
2012-06-19. Bumped InteractiveController version to 1.1.6.
Edited save solution and load solution schema to conform
with ScriptedController (and maybe also ValidationTool and
Validator).

<p>
2012-05-27. Resuming work on trends. 

<p>
2012-05-26. Pushed Validator v2.0.4 with some small changes
in function and some small fixes. Also pushed the Validation
repo with current Validator output.

<p>
2012-05-25. v2.0.2 changes the layout of a scripts results
file to
<br># Header
<br># Scores
<br># All of the rest in chronological order

<p>
2012-05-25. My bad. v2.0.0 did not have full change function.
Fixed and pushed v2.0.1.

<p>
2012-05-25. Validator (v2.0) has been pushed and is ready
for evaluation.

<p>
2012-05-23. Just an update here. Still working on the
Validator(v2.0). The basic stuff is great. Adding some
features.

<p>
2012-05-19. Totally rebuilding the Validator. Will bump
the version number to 2.

<p>
2012-05-18. Finished ValidationTool. Pushed version 1.0.0.
A sample script is located in Docs | Scripts.

<p>
2012-05-16. ValidationTool(v0.2.0). It parses, runs the
solver, shows Advanced. It parses test but doesn't calculate
the results, yet.

<p>
2012-05-16. Add general scripting schema documentation for
the ValadationTool and the Validator. In Docs | Schema |
Script | ... - OverviewScript.DOCX.

<p>
2012-05-15. Added folders, HTML and PNG's to the basic
validation Web site.

<p>
2012-05-13. Validation stuff now has its own repository
in github, named 'validation'. Like 'autodoc', this
repository is a Web site. You get their from the HumMod
Repository using the link 'http://hummod.github.com/validation.

<p>
The root file is the default 'index.html'.

<p>
Each model in the HumMod Repository can have its own
validation content. Right now, only HumMod(v2.0) has validation
content. You get to this content via Home | Models |
HumMod (v2.0) and the Validation button.

<p>
2012-05-11. Adding classes to ValidationTool. Still not
functional. But gaining,

<p>
2012-05-11. Creating a validation tool that is used
in building and testing validation scripts. Called
ValidationTool.EXE. This tool does not emit HTML and
does not interact with the Internet. Instead, it parses
validation scripts and displays or emits the test scores.
When a script or scripts are judged to be useful, they
can then be folded into a larger group or scripts that
are used in the global validation study. ValidationTool
runs locally in any location. I pushed a shell copy of
the code.

<p>
2012-05-10. Removed lots of dead code from
ScriptedController.

<p>
2012-05-09.  Revised pipe sequences in these four
applications. Files edited were IPC_InBox.CS and
IPC_OutBox.CS. In addition, tweaked MainWindow.CS in
ModelSolver. Pushed all four.

<p>
InteractiveController (1.1.5)
<br>
ScriptedController (2.0.1)
<br>
ModelSolver (1.0.6)
<br>
Validator (1.1.3)

<p>
2012-05-09. Pushed Scripted Controller (Version 2.0.0).
It has been lightly tested. Needs rigorous testing.

<p>
2012-05-01. The repository called HumModRepository on
my local workstation was pushed to github to become a
Web site biosim.github.com (www. is no loanger required).
Then we moved the host to hummod.github.com/autodoc.
This document is hosted in the repository be moved. So
if there is no further traffic on this topic, all of the
stuff at biosim.github.com will be presented at
hummod.github.com/autodoc.

<p>
2012-03-09. The next step is a total renovation of
the way context scales initial values.  

<p>
2012-03-09. HumMod's folder organization so far has
been to keep context stuff in a separate folder up
at the level of sturcture, control and display. But
really, context stuff is all structure -- so I made
it a subfolder under Structure. Deleted benchmarks.
Bumped version number to 2.0.15.

<p>
2012-03-09. Two script names (presumably primary and
sandbox) can now be specified and toggled. Visible at
Advanced | Startup. Version to 1.1.2. 

<p>
2012-03-09. Validator wants to run a predetermined script
at startup using information stored in the registry. But
if you don't want this, hold down the control key when
launching.

<p>
2012-03-09. The InteractiveController would not update an
open panel after the user did something on another panel
and then came to the former. Fixed. Bumped version to 1.1.4.

<p>
2012-03-07. Stripped all of the dead code out of Validator
and started routine use. There is no documentation but
there are plenty of scripts in the repository. v1.1.1.

<p>
2012-03-07. Totally rewrote Validator to simplify schema,
increase flexibility and improve internal structure.
Bumped version number to 1.1.0.

<p>
2012-03-06. Bumped version number to 1.0.2. Edited a type in
tabbed dialog Status.

<p>
2012-03-05. Working on some improvements to Validator. Bump
version number to 1.0.1.

<p>
2012-03-04. Validator is a simulation utility that parses and
executes scripts that control solutions. Validator collects
measures of prediction accuracy and emits this information as
Web pages in the HumMod Repository. Version 1.0.0 has just
been pushed.

<p>
Sub-folder organization is significant. Each sub-folder contains
one script named Script.Script. Validator takes this script and
emits an HTML version of it. Validator then executes the script
and emits the results as HTML into Results.HTML in the same
subfolder.

<p>
So after Validator has been run, each sub-folder contains three
files.

<p> # Script.Script (by the scipt author)
<br> # Script.HTML (by Validator)
<br> # Results.HTML (by Validator)

<p>
Some early results can be seen in the HumMod Repository
under Validation.

<p>
The Validator bottom line is that Validator takes care of all
of the Web site management. The script writer can focus solely
on creating scripts that accurately evaluate the performance
of the model.

<p>
2012-02-27. Changed the Settings menu item in the ModelSolver
to Advanced and added some tabs. Making some small changes in
ScriptedController as it is used to do validation. Added more
tabs to advanced.

<p>
2012-02-27. Refactored the pipe in both controllers and the
solver. Then bumped version numbers.

<p> Interactive Controller (v1.1.3)
<br> Scripted Controller (v1.1.6)
<br> Model Solver (v1.0.5)

<p>
2012-02-26. Added elements to the ScriptedController's scripting
schema to help accumlating, formatting and pasting to the results
log statistics generated by the Accept, Quality and Review tests.
The element names start with stats_. Documentation is in Docs at
ScriptedController\Docs\Schema\Script.

<p>
2012-02-26. Added script_to_html element to ScriptedController's
schema. This element tells the ScriptedController to take all of
the files contributing to the current script and make HTML
formatted copies of the files. Way cool, these copies can be
routed directly and automatically to the HumMod repository Web
site. A site visitor can see both the results of a script and
the script that created the results. Repository curator (currently)
must manually edit an index page for each of results and scripts.

<p>
2012-02-26. Bumped InteractiveController version to 1.1.5 with a
large number of edits underway.

<p>
2012-02-25. Completed implementing the scripted controller's
files element.

<p>
2012-02-25. Added some new elements to the scripted controller's
scripting schema so that statistics may be calculated, accumulated
and displayed on a local, regional or global basis. Will have
some documentation next.

<p>
2012-02-25. Bumped version numbers due to a variety of edits.

<p> Interactive Controller (v1.1.2)
<br> Scripted Controller (v1.1.4)
<br> Model Solver (v1.0.4)

<p>
2012-02-25. I modified the pipe a bit to tidy it up. I hope
that I didn't foul it up.

<p>
2012-02-24. Small edits to scripted controller.

<p>
2012-02-24. Interactive controller goes to v1.1.1 with better
implementation of the action button. Build date is now shown
in the dialog box. Model title now comes across from the model
solver in the large controllerinfo message. The title is then
added to controller's title bar (at the top of the main window).

<p>
2012-02-24. Model solver now treats action button as a top-level
asynchronous event. Responds with two new messages : actionbuttondone
and actionbuttonfailed. Version 1.0.3.

<p>
2012-02-23. All of the basic formatting code is in place in
ScriptedController and it is ready for use. But a large
amount of further refinement is forthcoming

<p>
2012-02-23. Fixed ActionButton problem. The problem was in
the ModelSolver which thought that an action button message
was actually an action button display element. Thanks Drew.

<p>
2012-02-23. Bumped version to v1.1.3. Refactored file I/O. 

<p>
2012-02-22. ScriptedController edits are moving right along.

<p>
2012-02-22. Bumped ScriptedController to v1.1.2 as edits continue.

<p>
2012-02-22. Expanded the HumModRepository to store and display the
scripts used in model validation.

<p>
2012-02-21. Well into final part of this redo, which is implementing
the emit element. Emit lets a script specify the results log
formatting as: TEXT, XML, or HTML.

<p>
2012-02-21. Cleaned up code that handles a missing startup script
(named in command line or registry).

<p>
2012-02-21. Bumped ScriptedController to v1.1.1 as edits continue.

<p>
2012-02-20. There may have been a long standing error in getting
startup script names out of the registry. Startup code has been
refactored. Looks and works good.

<p>
2012-02-20. New scripting elements have been added to schema and
to code. Documentation is up to date in Docs | Schema | Script. 

<p>
2012-02-20. Bumped ScriptedController to v1.1.0. A major remake
is underway.

<p>
2012-02-20. Added three elements to the Scripted Controller's
scripting schema (no coding yet, just documentation). These
elements should be useful when we are routing Scripted
Controller output directly to a Web site.

<p>
The new elements are

<p>&lt;parent&gt; ... &lt;/parent&gt;
<br>&lt;homepath&gt; ... &lt;/homepath&gt;
<br>&lt;breadcrumbs&gt; ... &lt;/breadcrumbs&gt;

<p>
2012-02-20. Roughed out the model validation section in
the HumMod Repository. Try Validation | HumMod(v2.0) |
Initial Values ... 

<p>
2012-02-19. Following Marek's suggestion, renal efferent
blood flow was broken down into some of its component
parts. Details are visible at Organs | Kidney | Vascular
Segments | Efferent Artery. 

<p>
2012-02-19. Added vascular conductance on a /G basis to :
right heart, left heart, hepatic artery, hepatic vein,
kidney.

<p>
2012-02-19. Bumped version to 2.0.13.

<p>
2012-02-18. Putting in all vascular conductance as a /G
function of organ weight (ie scaled). About 1/2 done.

<p>
2012-02-18. I didn't have lactate metabolism quite right,
and after two weeks the lactate mass in the kidney went to
zero triggering a divide by zero in the fuel selector. I
think that this is fixed with improved physiology actually.

<p>
2012-02-18. Bumped version to 2.0.12.

<p>
2012-02-17. Marek pointed out that I was cutting corners on
this calculation by assuming a pulse pressure in the stroke
volume calculation (using the Suga-Sagawa heart model). The
rigorous calculation is now in place, using an implicit
algebraic equation. SBP in aorta and pulmonary artery is
defined by the implicit. Stoke volume is calculated and used
to calculate the end value of SBP. The calculation crosses
several structures, but it should be a very benign calculation.

<p>
2012-02-17. Values for left and right side stenosis and regurg
are now in groupboxes in the left and right heart pumping
panels.

<p>
2012-02-17. Code and panels are now installed in all 12 major
organs for the new fuel selector.

<p>
2012-02-16. Starting a data section in HumMod repository for
dietary sodium intake. Will use this data later for model
validation.

<p>
2012-02-15. Modified the Model Solver so that it can return
the model's title when requested. The Scripted Controller can
use this information when doing validations. The incoming
message is &lt;requesttitle/&gt; and the outgoing message is
&lt;title&gt; Title &lt;/title&gt;.

<p>
The title contains the model's version number.

<p>
Bumped the Model Solver's version number to 1.0.1.

<p>
2012-02-14. I created a new, way cool fuel selector. It is
initially installed in other tissues.

<p>
2012-02-14. There is now water vapor in inspired air. The
calculation is based on relative humidity. There is also a
water vapor gas tank. Air is humidified in the bronchi
(added groupbox) and insensible loss is calculated using
the amount of H2O added. This advance was suggested by
Drew. 

<p>
2012-02-14. Bumped version to 2.0.11.

<p>
2012-02-13. The big increase in arterial pO2 at the start of
exercise is gone, probably because cardiac output is increasing
more accurately.

<p>
2012-02-13. CO2 balance is now calculated in detail, including
renal bicarb excretion (suggested by Marek). Results are
displayed in a panel at Respiration | CO2 | Balance.

<p>
2012-02-13. Hunger is now a function of [Glucose] and
[Leptin].

<p>
2012-02-13. Redid mass balance and thermodynamics in GI
lumen.

<p>
2012-02-13. Bumped version to 2.0.10.

<p>
2012-02-12. Expanded the Lifestyle menu Diet to include
Hunger | Thirst and Control. Temperature of ingested food
and water may now be specified.

<p>
2012-02-12. Bumped version number to 2.0.9.

<p>
2012-02-11. Replaced the numerical methods in the pulmonary
circulation with a better way to do the hemodynbamics. I like
the results.

<p>
2012-02-11. Rescaled initial plasma protein to get an initial
COP of 28 mmHg. COP was starting at 26, which caused some
plasma leak into the IFV. Then scaled interstitial protein
for the first time to get an initial COP of around 8 mmHg.

<p>
2012-02-11.Added an Energy section, with Energy-Stores and
Energy-Tools structures. The first idea here is to calculated
and display total energy stored in the body, including lipid
and glycogen. Panel is visible as Energy Stores on the
Metabolism menu.

<p>
2012-02-11. Bumped version to 2.0.8.

<p>
2012-02-10. VascularCompartments keep their name in structures,
but are displayed under Circulation as Blood Vessels. Then in
the Blood Vessels menu, there is a Great Veins menu selection.
It shows panels for Superior Vena Cava, Coronary Sinus and
Inferior Vena cava.

<p>
2012-02-10. Revised Circulation | OrganFlow to prepare for
a superior and inferior vena cava. Right and left hearts now
drain into the right atrium through the coronary sinus, as
recommended by Marek.

<p>
2012-02-10. Bumped version to 2.0.7.

<p>
2012-02-09. Fixed middle and lower torso water problem as
reported by both Marek and Radu.

<p>
2012-02-09. Add lots of new pages to the Normal Values Web
site.

<p>
2012-02-08.Adding spreadsheet sheets and Web pages to Normal
Values in HumModRepository. 

<p>
2012-02-08. Cleaned up the layout in respiratory muscle size.
There was groupbox overlap.

<p>
2012-02-06. The idea right now is to put a lot of function
into a spreadsheet so that model scaling becomes algorithmic.
So far, so good. Added the basic building blocks like organ
mass and organ blood flow. The tougher stuff will come
later.

<p>
2012-02-05. Redesigned the Normal Values section of the
HumModRepository and started adding pages.

<br> General - Organ Mass
<br> General - Gender
<br> General - Blood Pressures
<br> General - Blood Flow

<p>
2012-02-04. Added major new section to HumModRepository titled
Normal Values with subsections Male 37 Years and Female 37 Years.

<p>
2012-02-04. Bumped version number to 2.0.6.

<p>
2012-02-03. Increased the initial CO2 mass in the brain a little
to get a better starting brain pH.

<p>
2012-02-03. Changed the name of BloodPh structure to BloodPhValues. 

<p>
2012-02-03. Add groupbox that announces gender at gender specific
organs : ovaries, uterus, testes. 

<p>
2012-02-03. Removed stimulators menu item and panel from Intervention.
Model had a couple of neural stimulators but I'm switching to clamps
to have consistency across the model.

<p>
2012-02-03. In menus and panels, RHPumping goes to RightHeartPumping,
LHPumping goes to LeftHeartPumping and Contractility goes to
HeartStrength. Left Heart and Right Heart Heart Strength, Contractile
Protein and Work get group boxes  -- in one case to separate
radiobuttons and in all cases to improve the look.

<p>
2012-02-03. Arterial hemorrhage can now be fixed rate or pressure
driven. Panel is under Trauma.

<p>
2012-02-03. Bumped version number to 2.0.5.


<p>
2012-02-02. Modeled coronary sinus. Variables are 

<p>
2012-02-02. Added posture energy. The code is in PostureEnergy.
The panel is under Miscellaneous | Orthostasis.

<p>
2012-02-02. Added heart mechanoreceptors code and panels at
autonomics afferents and autonomics CNS. Tidied up vagus nerve.

<p>
2012-02-02. Bumped version number to 2.0.4.

<p>
2012-02-01. Removed SequesteredBV from the Nerves | Autonomics |
Efferents menu. Installed Alpha Receptors menu item at Miscellaneous 
Orthostatics | Sequestered Blood. Added a panel. Edited sequestered
blood in arteries and veins to show effect of alpha agonist on
pressure-volume relationship.

<p>
2012-02-01. Renamed the SympsChemo structure to ChemoreceptorsCNS.
Then wrote the code and panel for the CNS processing of
chemoreceptor afferent nerve activity.

<p>
2012-02-01. Added code and panel for Cushing response.

<p>
2012-02-01. Added code and panel for CNS trophic factor.

<p>
2012-02-01. Bumped version number to 2.0.3.

<p>
2012-01-31. Edited code, added panels and boxes for afferent
autonomic nerves and central integration of the metaboreflex.
Also fleshed out its effect on the respiratory center.

<p>
Completing and redoing chemoreceptors.

<p>
2012-01-31. Bumped version number to 2.0.2.

<p>
2012-01-30. Added a data set to the HumModRepository. It
is visible at Data | Acid-Base | Ketoacidosis.

<p>
2012-01-29. Two structures were added under Structures \
Morphology. They are Volume.DES and Density.DES. These
structures calculate the volume and the density of the
body.

<p>
Then Display\Diagnosis was edited to replace Morphology
menu item with a Size menu. The Size panels show morphology,
body mass, body volume and body density in detail.

<p>
2012-01-29. Added group boxes and tidied up panels for

<p class='Indent'>
Display\Hormones\CRF\...

<br>
Display\Hormones\Cortisol\...

<br>
Display\Hormones\PTH\...

<br>
Display\Hormones\Vitamin D\... 4 Panels.

<p>
2012-01-29. Added tissue details to Pancreas. Details are
visible in Organs | More | Pancreas.

<p>
2012-01-29. Added tissue details to Adrenal Gland. Details are
visible in Organs | More | Adrenal Gland.

<p>
2012-01-29. Bumped HumMod XML version number to 2.0.1. Plan to
bump daily now with all of the edits going in.

<p>
2012-01-28. With the Win32 library (HumMod.EXE), the programmer
must group the radiobuttons into functional groups. With C# and
WinForms, all of the radiobuttons with the same parent are
considered to be in the same group. I had some panels with more
than one group of radiobuttons on the surface. Parenthood was
clarified by putting groups of buttons in appropriate group
boxes. Panels that were edited :

<p class='Indent'>
Display\Hormones\ACTH\...

<br>
Display\Hormones\Calcitonin\...

<br>
Display\Hormones\Cortisol\...

<p>
More panel edits to follow.

<p>
2012-01-28. Installed placeholder folders and files for adrenal
gland and pancreas. Organ weights are visible at <i>Organs</i>
| <i>More</i>. Folders and files created :

<p class='Indent'>
Structure\AdrenalGland\...

<br>
Structure\Pancreas\...

<br>
Display\Tree\Organs\More\AdrenalGland.DES

<br>
Display\Tree\Organs\More\Pancreas.DES

<br>
Display\Organs\More\AdrenalGland\...


<br>
Display\Organs\More\Pancreas\...

<p>
2012-01-28. Thanks to Drew Pruett for this fix. And also Marek. Renin
flux between free renin and granules had derivative signs reversed,
which violated conservation of mass and caused big problems in many
simulations after time had advanced about a week. Files edited :

<p class='Indent'>
Structure\ReninGranules.DES

<br>
Structure\ReninFree.DES

<br>
Structure\Renin.DES

<br>
Display\Hormones\Renin\Kidney\Granules.DES

<br>
Display\Hormones\Renin\Kidney\Free.DES

<p>
2012-01-27. To get solution control and display information from
the model solver, the model controller sends a <i>requestcontrollerinfo/</i>
empty message. The controller has a response that was prepared during
model parsing and replies with a <i>controllerinfo</i> ...
<i>/controllerinfo</i> message wrapped around the info.

<p>
2012-01-27. You can edit the content for the <i>hidewindow</i>
element below to <i>True</i> to hide the model solver's main
window. Generally, Windows won't let you hide an application's
main window, but you can minimize and not show it in the task
bar to make it completely disappear.

<p class='Indent'>
WindowState = FormWindowState.Minimized ;

<br>
ShowInTaskbar = false ;

<p>
If there is a messup, use the task manager to mop up. Note that the
only way to get the window back is to edit the INI file back to
<i>False</i>.

<p>
2012-01-27. The model solver uses an INI file in place of Windows
registry.

<code>
<P>&lt;ini&gt;
  <p class='Indent'> &lt;windowtop&gt; 136 &lt;/windowtop&gt;
  <br> &lt;windowleft&gt; 776 &lt;/windowleft&gt;
  <br> &lt;windowhigh&gt; 174 &lt;/windowhigh&gt;
  <br> &lt;windowwide&gt; 341 &lt;/windowwide&gt;
  <br> &lt;windowstate&gt; 0 &lt;/windowstate&gt;
  <br> &lt;pipeinterval&gt; 200 &lt;/pipeinterval&gt;
  <br> &lt;hidewindow&gt; False &lt;/hidewindow&gt;
<p>&lt;/ini&gt;
</code>

<p>
2012-01-27. Model controllers launch the model solver and pass the model
name and location in using the command line. On the desktop it might be
possible to use the defaults by putting the model controller, model
solver and model root file all in the same folder.

<p>
But a better idea might be to specify the model solver and model using
the model controller's <i>Advanced</i> menu selection.

<p>
<img src='DialogShowingSolverAndModel.PNG'>

<p>
The defaults are

<p class='Indent'>
Solver : Model Solver.exe

<br>
Model : HumMod.DES

<p>
2012-01-27. The Model Solver now parses the entire model and tucks
information that might be needed by the model controller into a cache.

<p>
2012-01-27. The development and use of Builder and BuilderXML has been
discontinued. Repository content has been moved to the Archives repo and
the Builder and BuilderXML repo's have been deleted.

<p>
2012-01-26. I created separate documentation sections in HumModRepository
for HumMod(1_6) release and HumMod(2_0) being developed.

<br>
<img src='ReleaseVersions.PNG'>

<p>
2012-01-19. Created this log to record the edits applied to HumMod's XML
files. T.C.

<p><img src='../../Footer.PNG'>

</body>
</html>
